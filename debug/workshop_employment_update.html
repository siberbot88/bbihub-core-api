<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workshop & Employment Update Documentation</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Fredoka:wght@300..700&display=swap"
        rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #ffffff;
            color: #1f2937;
        }

        .font-bubble {
            font-family: 'Fredoka', sans-serif;
        }

        .section-title {
            font-family: 'Fredoka', sans-serif;
            color: #DC2626;
        }

        .card {
            background: #ffffff;
            border: 1px solid #fee2e2;
            border-radius: 1rem;
            transition: all 0.3s ease;
        }

        .card:hover {
            border-color: #DC2626;
            box-shadow: 0 10px 25px rgba(220, 38, 38, 0.05);
            transform: translateY(-2px);
        }

        .badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.875rem;
            font-weight: 600;
        }

        .badge-primary {
            background-color: #fee2e2;
            color: #DC2626;
        }

        .badge-success {
            background-color: #d1fae5;
            color: #059669;
        }

        .badge-info {
            background-color: #dbeafe;
            color: #2563eb;
        }

        .badge-warning {
            background-color: #fef3c7;
            color: #d97706;
        }

        pre {
            background-color: #f9fafb;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            padding: 1rem;
            overflow-x: auto;
        }

        code {
            font-family: 'Courier New', monospace;
            font-size: 0.875rem;
        }

        .feature-list li {
            padding: 0.5rem 0;
            border-bottom: 1px solid #f3f4f6;
        }

        .feature-list li:last-child {
            border-bottom: none;
        }

        .highlight {
            background: linear-gradient(120deg, #fee2e2 0%, #fee2e2 100%);
            background-repeat: no-repeat;
            background-size: 100% 40%;
            background-position: 0 100%;
        }
    </style>
</head>

<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-white border-b border-gray-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <div class="h-12 w-12 bg-red-600 rounded-xl flex items-center justify-center">
                        <span class="text-white font-bold text-xl">BH</span>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold font-bubble text-gray-900">BBI HUB API</h1>
                        <p class="text-xs text-gray-500">Workshop & Employment Updates</p>
                    </div>
                </div>
                <div class="flex items-center gap-2">
                    <span class="badge badge-primary">v1.1.0</span>
                    <span class="badge badge-success">Verified</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-6 py-10">

        <!-- Overview -->
        <section class="mb-12">
            <div class="card p-8">
                <h2 class="section-title text-3xl font-bold mb-4">üìã Ringkasan Update</h2>
                <p class="text-gray-600 mb-6">
                    Dokumentasi implementasi fitur update workshop dan pagination daftar karyawan.
                    Update ini mencakup perubahan pada API endpoint, logic backend, dan penyesuaian untuk integrasi
                    Flutter.
                </p>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-6">
                    <div class="bg-red-50 border border-red-100 rounded-lg p-4">
                        <div class="text-2xl font-bold text-red-600 mb-1">2</div>
                        <div class="text-sm text-gray-600">Fitur Utama</div>
                    </div>
                    <div class="bg-emerald-50 border border-emerald-100 rounded-lg p-4">
                        <div class="text-2xl font-bold text-emerald-600 mb-1">100%</div>
                        <div class="text-sm text-gray-600">Test Coverage</div>
                    </div>
                    <div class="bg-blue-50 border border-blue-100 rounded-lg p-4">
                        <div class="text-2xl font-bold text-blue-600 mb-1">API</div>
                        <div class="text-sm text-gray-600">Pagination Support</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Table of Contents -->
        <section class="mb-12">
            <div class="card p-8">
                <h2 class="section-title text-2xl font-bold mb-6">üìë Daftar Isi</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <a href="#workshop-update" class="p-4 bg-gray-50 rounded-lg hover:bg-red-50 transition-colors">
                        <div class="font-semibold text-gray-900">1. Workshop Update</div>
                        <div class="text-sm text-gray-500 mt-1">API endpoint untuk update detail bengkel</div>
                    </a>
                    <a href="#employment-pagination"
                        class="p-4 bg-gray-50 rounded-lg hover:bg-red-50 transition-colors">
                        <div class="font-semibold text-gray-900">2. Employment Pagination</div>
                        <div class="text-sm text-gray-500 mt-1">Implementasi pagination dan search karyawan</div>
                    </a>
                    <a href="#testing" class="p-4 bg-gray-50 rounded-lg hover:bg-red-50 transition-colors">
                        <div class="font-semibold text-gray-900">3. Testing Verification</div>
                        <div class="text-sm text-gray-500 mt-1">Hasil feature testing</div>
                    </a>
                </div>
            </div>
        </section>

        <!-- Workshop Update Section -->
        <section id="workshop-update" class="mb-12">
            <div class="card p-8">
                <h2 class="section-title text-2xl font-bold mb-6">üè™ 1. Workshop Update API</h2>

                <div class="mb-8">
                    <h3 class="text-xl font-semibold text-gray-900 mb-4">‚ú® Endpoint Details</h3>
                    <div class="bg-gray-50 p-4 rounded-lg mb-4">
                        <div class="flex items-center gap-2 mb-2">
                            <span class="badge badge-warning">PUT</span>
                            <code class="text-sm font-bold">/api/v1/owners/workshops/{workshop}</code>
                        </div>
                        <p class="text-sm text-gray-600">Mengupdate informasi bengkel termasuk foto, jam operasional,
                            dan status.</p>
                    </div>

                    <h4 class="font-semibold text-gray-800 mb-2">Request Body (Multipart/Form-Data)</h4>
                    <ul class="feature-list space-y-2">
                        <li class="flex items-start gap-3">
                            <span class="text-emerald-600 mt-1">‚óè</span>
                            <div>
                                <strong>name</strong> (string, optional): Nama bengkel
                            </div>
                        </li>
                        <li class="flex items-start gap-3">
                            <span class="text-emerald-600 mt-1">‚óè</span>
                            <div>
                                <strong>photo</strong> (file, optional): Foto bengkel (image/jpeg, png, jpg, max 2MB)
                            </div>
                        </li>
                        <li class="flex items-start gap-3">
                            <span class="text-emerald-600 mt-1">‚óè</span>
                            <div>
                                <strong>opening_time</strong> (H:i, optional): Jam buka
                            </div>
                        </li>
                        <li class="flex items-start gap-3">
                            <span class="text-emerald-600 mt-1">‚óè</span>
                            <div>
                                <strong>closing_time</strong> (H:i, optional): Jam tutup
                            </div>
                        </li>
                        <li class="flex items-start gap-3">
                            <span class="text-emerald-600 mt-1">‚óè</span>
                            <div>
                                <strong>operational_days</strong> (string, optional): Hari operasional (e.g.,
                                "Senin-Jumat")
                            </div>
                        </li>
                        <li class="flex items-start gap-3">
                            <span class="text-emerald-600 mt-1">‚óè</span>
                            <div>
                                <strong>information</strong> (string, optional): Deskripsi bengkel (mapped to
                                `description`)
                            </div>
                        </li>
                        <li class="flex items-start gap-3">
                            <span class="text-emerald-600 mt-1">‚óè</span>
                            <div>
                                <strong>is_active</strong> (boolean, optional): Status aktif bengkel
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="mb-8">
                    <h3 class="text-xl font-semibold text-gray-900 mb-4">üèóÔ∏è Implementation</h3>
                    <div class="space-y-4">
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-2">Controller Logic</h4>
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <code class="text-sm">app/Http/Controllers/Api/Owner/WorkshopApiController.php</code>
                            </div>
                            <pre class="mt-2 text-xs"><code>public function update(UpdateWorkshopRequest $request, Workshop $workshop): JsonResponse
{
    $data = $request->validated();

    if ($request->hasFile('photo')) {
        $path = $request->file('photo')->store('workshops', 'public');
        $data['photo'] = url('storage/' . $path);
    }

    // Map 'information' to 'description'
    if (isset($data['information'])) {
        $data['description'] = $data['information'];
        unset($data['information']);
    }

    $workshop->update($data);

    return $this->successResponse('Workshop updated successfully', $workshop);
}</code></pre>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Employment Pagination Section -->
        <section id="employment-pagination" class="mb-12">
            <div class="card p-8">
                <h2 class="section-title text-2xl font-bold mb-6">üë• 2. Employment Pagination</h2>

                <div class="mb-8">
                    <h3 class="text-xl font-semibold text-gray-900 mb-4">‚ú® Endpoint Details</h3>
                    <div class="bg-gray-50 p-4 rounded-lg mb-4">
                        <div class="flex items-center gap-2 mb-2">
                            <span class="badge badge-info">GET</span>
                            <code class="text-sm font-bold">/api/v1/owners/employee</code>
                        </div>
                        <p class="text-sm text-gray-600">Mengambil daftar karyawan dengan dukungan pagination dan
                            pencarian.</p>
                    </div>

                    <h4 class="font-semibold text-gray-800 mb-2">Query Parameters</h4>
                    <ul class="feature-list space-y-2">
                        <li class="flex items-start gap-3">
                            <span class="text-blue-600 mt-1">‚óè</span>
                            <div>
                                <strong>page</strong> (int, optional): Nomor halaman (default: 1)
                            </div>
                        </li>
                        <li class="flex items-start gap-3">
                            <span class="text-blue-600 mt-1">‚óè</span>
                            <div>
                                <strong>per_page</strong> (int, optional): Jumlah item per halaman (default: 15)
                            </div>
                        </li>
                        <li class="flex items-start gap-3">
                            <span class="text-blue-600 mt-1">‚óè</span>
                            <div>
                                <strong>search</strong> (string, optional): Keyword pencarian (nama, email, username)
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="mb-8">
                    <h3 class="text-xl font-semibold text-gray-900 mb-4">üì¶ Response Structure</h3>
                    <p class="text-sm text-gray-600 mb-2">Response kini mengembalikan object pagination, bukan list
                        array langsung.</p>
                    <pre class="text-xs"><code>{
    "message": "Data karyawan berhasil diambil",
    "data": {
        "current_page": 1,
        "data": [
            {
                "id": "...",
                "name": "John Doe",
                "role": "mechanic",
                ...
            }
        ],
        "first_page_url": "...",
        "from": 1,
        "last_page": 1,
        "last_page_url": "...",
        "links": [...],
        "next_page_url": null,
        "path": "...",
        "per_page": 15,
        "prev_page_url": null,
        "to": 1,
        "total": 1
    }
}</code></pre>
                </div>

                <div class="mb-8">
                    <h3 class="text-xl font-semibold text-gray-900 mb-4">üèóÔ∏è Service Implementation</h3>
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <code class="text-sm">app/Services/EmploymentService.php</code>
                    </div>
                    <pre class="mt-2 text-xs"><code>public function getEmployees($workshopIds, ?string $search = null, int $perPage = 15)
{
    $query = Employment::whereIn('workshop_uuid', $workshopIds)
        ->with(['user', 'user.roles:name', 'workshop:id,name,user_uuid']);

    if ($search) {
        $query->whereHas('user', function ($q) use ($search) {
            $q->where('name', 'like', "%{$search}%")
              ->orWhere('email', 'like', "%{$search}%")
              ->orWhere('username', 'like', "%{$search}%");
        });
    }

    return $query->latest()->paginate($perPage);
}</code></pre>
                </div>
            </div>
        </section>

        <!-- Testing Section -->
        <section id="testing" class="mb-12">
            <div class="card p-8">
                <h2 class="section-title text-2xl font-bold mb-6">üß™ 3. Testing Verification</h2>

                <div class="space-y-6">
                    <div>
                        <h3 class="text-lg font-semibold text-gray-900 mb-3">Feature Tests</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-green-500">
                                <h4 class="font-semibold text-gray-900 mb-1">WorkshopUpdateTest</h4>
                                <p class="text-sm text-gray-600">Verifikasi update nama, foto, jam, dan status.</p>
                                <div class="mt-2 text-xs font-mono text-green-600">PASS</div>
                            </div>
                            <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-green-500">
                                <h4 class="font-semibold text-gray-900 mb-1">EmploymentPaginationTest</h4>
                                <p class="text-sm text-gray-600">Verifikasi struktur pagination dan filter search.</p>
                                <div class="mt-2 text-xs font-mono text-green-600">PASS</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-8 mt-20">
        <div class="max-w-7xl mx-auto px-6 text-center">
            <div class="mb-4">
                <h3 class="text-xl font-bold font-bubble mb-2">BBI HUB API Documentation</h3>
                <p class="text-gray-400 text-sm">Workshop & Employment Update v1.1.0</p>
            </div>
            <div class="text-gray-500 text-sm">
                <p>Generated: 27 November 2025</p>
                <p class="mt-2">¬© 2025 BBI HUB. All rights reserved.</p>
            </div>
        </div>
    </footer>

</body>

</html>