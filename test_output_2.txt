
   WARN  Metadata found in doc-comment for method Tests\Feature\Api\VoucherApiControllerTest::it_can_get_a_list_of_vouchers(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\Api\VoucherApiControllerTest::it_can_filter_active_vouchers(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\Api\VoucherApiControllerTest::it_can_create_a_voucher(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\Api\VoucherApiControllerTest::it_can_get_a_single_voucher(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\Api\VoucherApiControllerTest::it_can_update_a_voucher(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\Api\VoucherApiControllerTest::it_can_delete_a_voucher(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   FAIL  Tests\Feature\StaffPerformanceTest
  Ô¿» can get all staff performance       10.80s  
  Ô¿» can get individual staff performancÔÇª 0.19s  
  Ô¿» date range filtering                 0.22s  
  Ô£ô authorization checks                 0.21s  
  ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ  
   FAILED  Tests\Feature\StaffPerformanceTesÔÇª   
  Expected response status code [200] but received 403.
Failed asserting that 403 is identical to 200.

  at tests\Feature\StaffPerformanceTest.php:63
     59Ôûò                 'workshop_uuid' => $this->workshop->id,
     60Ôûò                 'range' => 'month'
     61Ôûò             ]));
     62Ôûò 
  Ô×£  63Ôûò         $response->assertOk()
     64Ôûò             ->assertJsonStructure([
     65Ôûò                 'success',
     66Ôûò                 'data' => [
     67Ôûò                     '*' => [

  ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ  
   FAILED  Tests\Feature\StaffPerformanceTesÔÇª   
  Expected response status code [200] but received 403.
Failed asserting that 403 is identical to 200.

  at tests\Feature\StaffPerformanceTest.php:104
    100Ôûò                 'workshop_uuid' => $this->workshop->id,
    101Ôûò                 'range' => 'month'
    102Ôûò             ]));
    103Ôûò 
  Ô×£ 104Ôûò         $response->assertOk()
    105Ôûò             ->assertJsonStructure([
    106Ôûò                 'success',
    107Ôûò                 'data' => [
    108Ôûò                     'staff_id',

  ÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇÔöÇ  
   FAILED  Tests\Feature\StaÔÇª  ErrorException   
  Trying to access array offset on value of type null

  at tests\Feature\StaffPerformanceTest.php:145
    141Ôûò                 'range' => 'today'
    142Ôûò             ]));
    143Ôûò 
    144Ôûò         $data = $response->json('data.0');
  Ô×£ 145Ôûò         $this->assertEquals(200000, $data['metrics']['total_revenue']); // Only today's service
    146Ôûò 
    147Ôûò         // Test 'month' range (default) - should include today's service, but maybe not last month's depending on date
    148Ôûò         // If today is 1st of month, subMonth is previous month.
    149Ôûò         // If today is 5th, subMonth is 5th of previous month.


  Tests:    3 failed, 1 passed (3 assertions)
  Duration: 12.49s

