    // Trial & Premium Access Helpers

    public function isInTrial(): bool
    {
        return $this->trial_ends_at && $this->trial_ends_at->isFuture();
    }

    public function hasPremiumAccess(): bool
    {
        $subscription = $this->ownerSubscription;
        if ($subscription && $subscription->status === 'active') {
            return true;
        }
        return $this->isInTrial();
    }

    public function getSubscriptionStatus(): ?string
    {
        $subscription = $this->ownerSubscription;
        if ($subscription) {
            return $subscription->status;
        }
        if ($this->isInTrial()) {
            return 'trial';
        }
        if ($this->trial_used && !$this->isInTrial()) {
            return 'expired';
        }
        return null;
    }

    public function trialDaysRemaining(): int
    {
        if (!$this->isInTrial()) {
            return 0;
        }
        return (int) now()->diffInDays($this->trial_ends_at, false);
    }
